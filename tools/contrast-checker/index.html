<!DOCTYPE html>
<html lang="en">

<head>

    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-7MGSKM9BJX"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag() { dataLayer.push(arguments); }
        gtag('js', new Date());

        gtag('config', 'G-7MGSKM9BJX');
    </script>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <title>Contrast Checker</title>
    <meta name="description" content="Our free Contrast Checker tool calculates the contrast ratio between two colors to ensure readability and accessibility for your website or design project." />

    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="/css/colors.css" />
    <link rel="stylesheet" href="/css/styles.css" />

    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: white;
            color: white;
            overflow: hidden;
            /* Prevents scrolling of the whole page */
        }

        .color-section {
            height: 50vh;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            position: relative;
            padding: 20px;
            box-sizing: border-box;
        }

        .slider-container {
            width: 70%;
            max-width: 600px;
        }

        /* --- Slider Track Styling --- */
        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 2px;
            /* Thinner track */
            background: white;
            border-radius: 1px;
            outline: none;
            margin: 20px 0;
        }

        /* --- Rectangular Slider Handle Styling --- */
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 24px;
            /* Rectangle width */
            height: 24px;
            /* Rectangle height */
            background: white;
            cursor: pointer;
            border-radius: 0px;
            /* Slightly rounded corners */
        }

        input[type="range"]::-moz-range-thumb {
            width: 24px;
            /* Rectangle width */
            height: 24px;
            /* Rectangle height */
            background: white;
            cursor: pointer;
            border-radius: 2px;
            /* Slightly rounded corners */
        }

        .hex-input-container {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            flex-direction: column;
            align-items: flex-end;
            gap: 10px;
        }

        .ratio-display {
            position: absolute;
            top: 20px;
            left: 20px;
            text-align: center;
        }

        .tool-btn.ratio-text {
            font-weight: 600;
        }

        .ratio-explain-text {
            position: absolute;
            top: 20px;
            left: 50%;
            transform: translateX(-50%);
            text-align: center;
            font-size: 19px;
            color: white;
            margin-top: 5px;
            max-width: 400px;
        }
    </style>

</head>

<body>

    <!-- Top Navigation -->
    <nav class="top-nav">
        <!-- Left block -->
        <div class="top-nav-left-block">
            <a href="/tools" class="top-nav-btn">Tools</a>
            <a href="/youtube" class="top-nav-btn">Videos</a>
            <a href="/support" class="top-nav-btn">Support</a>
        </div>

        <!-- Right block -->
        <div class="top-nav-right-block">
            <a href="/" class="top-nav-btn">Download App</a>
        </div>
    </nav>


    <!-- Tool -->
    <div id="app-container">

        <div id="color-section-1" class="color-section">

            <div id="ratio-explain-text" class="ratio-explain-text"></div>
            <div class="slider-container">
                <input type="range" id="saturation-slider-1" min="0" max="1" step="0.01">
                <input type="range" id="brightness-slider-1" min="0" max="1" step="0.01">
            </div>
            <div id="ratio-text" class="ratio-display tool-btn no-hover ratio-text">
                <button>1.00:1</button>
            </div>
            <div class="hex-input-container">
                <input type="text" id="hex-input-1" class="tool-btn hex-input">
                <button id="copy-btn-1" class="tool-btn">COPY</button>
            </div>

        </div>

        <div id="color-section-2" class="color-section">

            <div class="slider-container">
                <input type="range" id="saturation-slider-2" min="0" max="1" step="0.01">
                <input type="range" id="brightness-slider-2" min="0" max="1" step="0.01">
            </div>
            <div class="hex-input-container">
                <input type="text" id="hex-input-2" class="tool-btn hex-input">
                <button id="copy-btn-2" class="tool-btn">COPY</button>
            </div>

        </div>

    </div>


    <div id="toast-message" class="toast">Copied to clipboard!</div>


    <script>
        // DOM Elements
        const colorSection1 = document.getElementById('color-section-1');
        const colorSection2 = document.getElementById('color-section-2');
        const hexInput1 = document.getElementById('hex-input-1');
        const hexInput2 = document.getElementById('hex-input-2');
        const satSlider1 = document.getElementById('saturation-slider-1');
        const brightSlider1 = document.getElementById('brightness-slider-1');
        const satSlider2 = document.getElementById('saturation-slider-2');
        const brightSlider2 = document.getElementById('brightness-slider-2');
        const ratioText = document.getElementById('ratio-text');
        const ratioExplainText = document.getElementById('ratio-explain-text');
        const copyBtn1 = document.getElementById('copy-btn-1');
        const copyBtn2 = document.getElementById('copy-btn-2');
        const toastMessage = document.getElementById('toast-message');

        // Initial Colors
        let color1 = { h: 346, s: 1, v: 1 }; // HSB for #FF275D
        let color2 = { h: 165, s: 1, v: 1 }; // HSB for #00FFC0

        // --- Color Conversion Functions ---
        function hsvToRgb(h, s, v) {
            let r, g, b;
            let i = Math.floor(h * 6);
            let f = h * 6 - i;
            let p = v * (1 - s);
            let q = v * (1 - f * s);
            let t = v * (1 - (1 - f) * s);
            switch (i % 6) {
                case 0: r = v, g = t, b = p; break;
                case 1: r = q, g = v, b = p; break;
                case 2: r = p, g = v, b = t; break;
                case 3: r = p, g = q, b = v; break;
                case 4: r = t, g = p, b = v; break;
                case 5: r = v, g = p, b = q; break;
            }
            return {
                r: Math.round(r * 255),
                g: Math.round(g * 255),
                b: Math.round(b * 255)
            };
        }

        function rgbToHsv(r, g, b) {
            r /= 255, g /= 255, b /= 255;
            let max = Math.max(r, g, b), min = Math.min(r, g, b);
            let h, s, v = max;
            let d = max - min;
            s = max == 0 ? 0 : d / max;
            if (max == min) {
                h = 0; // achromatic
            } else {
                switch (max) {
                    case r: h = (g - b) / d + (g < b ? 6 : 0); break;
                    case g: h = (b - r) / d + 2; break;
                    case b: h = (r - g) / d + 4; break;
                }
                h /= 6;
            }
            return { h: h * 360, s: s, v: v };
        }

        function rgbToHex(r, g, b) {
            return "#" + ((1 << 24) + (r << 16) + (g << 8) + b).toString(16).slice(1).toUpperCase();
        }

        function hexToRgb(hex) {
            const result = /^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(hex);
            return result ? {
                r: parseInt(result[1], 16),
                g: parseInt(result[2], 16),
                b: parseInt(result[3], 16)
            } : null;
        }

        // --- Contrast Ratio Logic ---
        function getLuminance(r, g, b) {
            const a = [r, g, b].map(function (v) {
                v /= 255;
                return v <= 0.03928 ? v / 12.92 : Math.pow((v + 0.055) / 1.055, 2.4);
            });
            return a[0] * 0.2126 + a[1] * 0.7152 + a[2] * 0.0722;
        }

        function getContrastRatio(rgb1, rgb2) {
            const lum1 = getLuminance(rgb1.r, rgb1.g, rgb1.b);
            const lum2 = getLuminance(rgb2.r, rgb2.g, rgb2.b);
            const brightest = Math.max(lum1, lum2);
            const darkest = Math.min(lum1, lum2);
            return (brightest + 0.05) / (darkest + 0.05);
        }

        function getContrastCategoryText(ratio) {
            if (ratio < 3) return "Low contrast, hard to read, not recommended for important content.";
            if (ratio < 4.5) return "Moderate contrast, suitable for large text.";
            if (ratio < 7) return "Good contrast, meets accessibility standards for normal text.";
            return "High contrast, ideal for maximum readability.";
        }

        // --- Update UI ---
        function updateUI() {
            const rgb1 = hsvToRgb(color1.h / 360, color1.s, color1.v);
            const hex1 = rgbToHex(rgb1.r, rgb1.g, rgb1.b);

            const rgb2 = hsvToRgb(color2.h / 360, color2.s, color2.v);
            const hex2 = rgbToHex(rgb2.r, rgb2.g, rgb2.b);

            colorSection1.style.backgroundColor = hex1;
            colorSection2.style.backgroundColor = hex2;

            if (document.activeElement !== hexInput1) hexInput1.value = hex1;
            if (document.activeElement !== hexInput2) hexInput2.value = hex2;

            ratioExplainText.style.color = hex2;
            hexInput1.style.borderColor = hex2;
            hexInput2.style.borderColor = hex1;

            satSlider1.value = color1.s;
            brightSlider1.value = color1.v;
            satSlider2.value = color2.s;
            brightSlider2.value = color2.v;

            const ratio = getContrastRatio(rgb1, rgb2);
            ratioText.textContent = `${ratio.toFixed(2)}:1`;
            ratioExplainText.textContent = getContrastCategoryText(ratio);

            localStorage.setItem('color1', JSON.stringify(color1));
            localStorage.setItem('color2', JSON.stringify(color2));
        }

        function showToast(message) {
            toastMessage.textContent = message;
            toastMessage.style.opacity = 1;
            setTimeout(() => {
                toastMessage.style.opacity = 0;
            }, 2500);
        }

        // --- Clipboard Functions ---
        function copyToClipboard(text) {
            const textArea = document.createElement('textarea');
            textArea.value = text;
            textArea.style.position = 'fixed';
            textArea.style.top = '-9999px';
            document.body.appendChild(textArea);
            textArea.select();
            try {
                document.execCommand('copy');
                showToast(`Copied ${text}`);
            } catch (err) {
                showToast('Copying failed.');
            }
            document.body.removeChild(textArea);
        }

        // --- Event Listeners ---
        satSlider1.addEventListener('input', (e) => {
            color1.s = parseFloat(e.target.value);
            updateUI();
        });
        brightSlider1.addEventListener('input', (e) => {
            color1.v = parseFloat(e.target.value);
            updateUI();
        });
        satSlider2.addEventListener('input', (e) => {
            color2.s = parseFloat(e.target.value);
            updateUI();
        });
        brightSlider2.addEventListener('input', (e) => {
            color2.v = parseFloat(e.target.value);
            updateUI();
        });

        hexInput1.addEventListener('change', (e) => {
            const rgb = hexToRgb(e.target.value);
            if (rgb) {
                color1 = rgbToHsv(rgb.r, rgb.g, rgb.b);
            }
            updateUI();
        });

        hexInput2.addEventListener('change', (e) => {
            const rgb = hexToRgb(e.target.value);
            if (rgb) {
                color2 = rgbToHsv(rgb.r, rgb.g, rgb.b);
            }
            updateUI();
        });

        copyBtn1.addEventListener('click', () => copyToClipboard(hexInput1.value));

        copyBtn2.addEventListener('click', () => copyToClipboard(hexInput2.value));

        // Initial Load
        window.onload = () => {
            const savedColor1 = localStorage.getItem('color1');
            const savedColor2 = localStorage.getItem('color2');

            if (savedColor1 && savedColor2) {
                color1 = JSON.parse(savedColor1);
                color2 = JSON.parse(savedColor2);
            } else {
                const initialRgb1 = hexToRgb('#6b6500');
                color1 = rgbToHsv(initialRgb1.r, initialRgb1.g, initialRgb1.b);

                const initialRgb2 = hexToRgb('#efffda');
                color2 = rgbToHsv(initialRgb2.r, initialRgb2.g, initialRgb2.b);
            }

            updateUI();
        };

    </script>

</body>

</html>